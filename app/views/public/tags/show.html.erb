<div class="container">

  <h1><%= @tag.name %>の投稿一覧</h1>
  <p>件数：<%= @total_spots_count %>件</p>

  <div class="sort-links">
    <%= link_to "新しい順", tag_path(@tag, sort: "new") %> |
    <%= link_to "評価の高い順", tag_path(@tag, sort: "star") %>
  </div>
  <hr>

  <% @spots.each do |spot| %>
    <div class="row">
      <div class="col-md-6">
      <%= render "public/spots/spot_info", spot: spot %>

        <div class="mt-3">
          <%= link_to '詳細を見る', spot_path(spot), class: 'btn btn-info' %>
        </div>
      </div>

      <div class="col-md-6 d-flex flex-column justify-content-center">
        <p class="body-collapse" id="body-<%= spot.id %>">
          <%= spot.body %>
        </p>
        <% if spot.body.present? && spot.body.length > 100 %>
          <button class="btn btn-link" onclick="toggleBody(event, <%= spot.id %>)">
            続きを読む
          </button>
        <% end %>

        <%= render "public/spots/user_avatar", spot: spot %>
        <%= render "public/spots/address", spot: spot, context: :index %>
        <%= render "public/spots/spot_meta", spot: spot %>
      </div>
    </div>
  <hr>
  <% end %>
  <%= paginate @spots %>
</div>